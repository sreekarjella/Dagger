<ion-header mode="ios">
    <ion-toolbar>
        <ion-buttons fill="clear" (click)="goBack()">
            <ion-button (click)="goBack()" role="button">
                <ion-icon name="chevron-back"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ng-container>
        <ion-spinner class="spinner-center" color="tertiary" name="circles"
            *ngIf="!dataLoaded && !movieData && suggestedMovies.length === 0"></ion-spinner>
    </ng-container>

    <ion-grid *ngIf="dataLoaded && movieData && suggestedMovies.length !== 0">
        <ion-row>
            <ion-col size="12" size-md>
                <ion-img [alt]="movieData.title_long" [src]="movieData.large_cover_image"></ion-img>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-md>
                <ion-text>
                    <h2>{{movieData.title_long}}</h2>
                </ion-text>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col class="no-top-padding" size="2" size-md>
                <ion-img src="../../../../assets/icon/imdb.svg"></ion-img>
            </ion-col>
            <ion-col class="ion-text-center" size="3" size-md>
                <ion-text>{{movieData.rating}}/10
                </ion-text>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-md>
                <ng-container *ngFor="let genere of movieData.genres; let index  = index">
                    <ion-text>{{genere}}&nbsp;</ion-text>
                    <ng-container *ngIf="index !== movieData.genres.length - 1">
                        <ion-text>/&nbsp;</ion-text>
                    </ng-container>
                </ng-container>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-md>
                <ng-container class="icon-vertical-alignment">
                    <ion-icon name="time"></ion-icon>
                </ng-container>
                <ion-text>&nbsp;{{movieData.runtime}} min</ion-text>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-md>
                Language:&nbsp;&nbsp;{{movieData.language}}
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-md>
                <ion-text>
                    <h4>Available in</h4>
                </ion-text>
            </ion-col>
        </ion-row>
        <ion-row>
            <ng-container *ngFor="let torrent of movieData.torrents">
                <ion-col size="6" size-md>
                    <ion-text class="capitalize-text vertical-text-align">{{torrent.quality}} {{torrent.type}}
                        {{torrent.size}}</ion-text>
                </ion-col>
                <ion-col size="6" size-md>
                    <ion-button size="small" fill="clear" [href]="torrent.url">Download torrent
                    </ion-button>
                </ion-col>
            </ng-container>
        </ion-row>
        <ng-container *ngIf="movieData.description_full">
            <ion-row>
                <ion-col size="12" size-md>
                    <ion-text>
                        <h4>Synopsis</h4>
                    </ion-text>
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col size="12" size-md>
                    <ion-text>{{movieData.description_full}}</ion-text>
                </ion-col>
            </ion-row>
        </ng-container>
        <ng-container *ngIf="movieData.cast">
            <ion-row>
                <ion-col size="12" size-md>
                    <ion-text>
                        <h4>Cast</h4>
                    </ion-text>
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col size="12" size-md>
                    <ion-list>
                        <ion-item *ngFor="let cast of movieData.cast">
                            <ion-avatar slot="start">
                                <ion-img [alt]="cast.name" [src]="cast.url_small_image">
                                </ion-img>
                            </ion-avatar>
                            <ion-label>
                                <ion-text>
                                    {{cast.name}} as {{cast.character_name}}
                                </ion-text>
                            </ion-label>
                        </ion-item>
                    </ion-list>
                </ion-col>
            </ion-row>
        </ng-container>

        <ng-container *ngIf="suggestedMovies.length !== 0">
            <ion-row>
                <ion-col size="12" size-md>
                    <ion-text>
                        <h4>You may also like</h4>
                    </ion-text>
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col class="ion-padding" size="6" size-md *ngFor="let movie of suggestedMovies">
                    <ion-img [alt]="movie.title_english" [src]="movie.medium_cover_image"
                        (click)="suggestedMovieReload(movie.id)"></ion-img>
                </ion-col>
            </ion-row>
        </ng-container>

    </ion-grid>
</ion-content>